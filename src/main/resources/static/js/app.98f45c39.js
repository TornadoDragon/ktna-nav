(function(){"use strict";var t={5183:function(t,e,i){var n=i(5471),a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{height:"100vh",width:"100vw","overflow-y":"hidden"}},[e("el-scrollbar",{staticStyle:{height:"100%",width:"100vw"},attrs:{"wrap-style":"overflow-x:hidden;"}},[e("div",{staticClass:"nav_top_style"},[e("div",{staticClass:"nav_title"},[e("div",{staticClass:"flex",staticStyle:{"justify-content":"space-between","align-items":"center"}},[e("div",{staticClass:"flex",staticStyle:{"flex-direction":"row","align-items":"center","justify-content":"flex-start"}},[e("img",{attrs:{src:"/favicon.ico",width:"20",height:"20"}}),e("span",{staticClass:"nav_title_name"},[t._v(t._s(t.config.title))])]),e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end",height:"50px"}},[t.isEdit?t._e():e("div",{staticClass:"flex DocSearch DocSearch-Button",staticStyle:{"align-items":"center"},attrs:{type:"button"}},[e("i",{staticClass:"el-icon-user-solid"}),e("span",{staticClass:"DocSearch-Button-Container"},[t._v("访问计数："+t._s(t.config.count))])]),t.isEdit?t._e():e("button",{staticClass:"DocSearch DocSearch-Button DocSearch-Button-Hover",attrs:{id:"navEditButton",type:"button","aria-label":"编辑模式"},on:{click:t.editConfig}},[e("i",{staticClass:"el-icon-edit-outline"}),e("span",{staticClass:"DocSearch-Button-Container"},[t._v("编辑模式")])]),e("EditTitle",{attrs:{id:"navEditTitleButton",data:t.config.title,"is-edit":t.isEdit},on:{"update:data":function(e){return t.$set(t.config,"title",e)}}}),t.isEdit?e("button",{staticClass:"DocSearch DocSearch-Button DocSearch-Button-Hover",attrs:{id:"navSaveButton",type:"button","aria-label":"保存变更"},on:{click:t.pushConfig}},[e("i",{staticClass:"el-icon-s-promotion"}),e("span",{staticClass:"DocSearch-Button-Container"},[t._v("保存变更")])]):t._e(),t.isEdit?e("button",{staticClass:"DocSearch DocSearch-Button DocSearch-Button-Hover",attrs:{id:"navCancelButton",type:"button","aria-label":"保存变更"},on:{click:t.cancelEdit}},[e("i",{staticClass:"el-icon-close"}),e("span",{staticClass:"DocSearch-Button-Container"},[t._v("取消变更")])]):t._e()],1)])]),e("div",{staticClass:"nav_main"},[e("InfoNav",{attrs:{id:"navMain",isEdit:t.isEdit,"nav-data":t.config.navData},on:{"update:navData":function(e){return t.$set(t.config,"navData",e)},"update:nav-data":function(e){return t.$set(t.config,"navData",e)}}})],1)])])],1)},o=[],r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"50px"}},[e("draggable",t._b({staticStyle:{width:"100%"},attrs:{group:"category",disabled:!t.isEdit},on:{start:function(e){return t.handleStartDrag(e.oldIndex,t.category)},end:t.handleEndDrag,change:t.categoryChange},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},"draggable",t.getCategoryOptions(),!1),t._l(t.category,(function(i,n){return e("el-row",{key:n,staticClass:"text-black",attrs:{gutter:10}},[e("el-divider",{attrs:{"content-position":"left"}},[e("b",[t._v(t._s(i.title))])]),e("draggable",t._b({staticStyle:{width:"100%"},attrs:{group:"people",disabled:!t.isEdit},on:{start:function(e){return t.handleStartDrag(e.oldIndex,i.data)},end:t.handleEndDrag},model:{value:i.data,callback:function(e){t.$set(i,"data",e)},expression:"item.data"}},"draggable",t.getOptions(),!1),t._l(i.data,(function(i,n){return e("el-col",{key:n,staticStyle:{"margin-bottom":"10px"},attrs:{lg:4,md:6,sm:8,xs:12}},[e("div",[e("el-card",{staticClass:"linkCard",staticStyle:{height:"100px",width:"100%","user-select":"none",cursor:"pointer","border-radius":"6px"},attrs:{shadow:"hover","body-style":{padding:"10px",height:"80px"}}},[e("div",{staticStyle:{display:"flex","flex-flow":"column","justify-content":"space-between",height:"80px"},on:{click:function(e){return e.stopPropagation(),t.click(i)}}},[e("div",{staticStyle:{display:"flex"}},[i.logo?e("el-image",{staticStyle:{width:"30px",height:"30px","margin-right":"5px","border-radius":"8px"},style:{backgroundColor:i.logoColor?i.logoColor:"#FFF"},attrs:{src:i.logo}}):t._e(),e("span",{staticClass:"title-color",staticStyle:{display:"inline-block","line-height":"30px","font-size":"14px"}},[t._v(t._s(i.name))])],1),e("span",{staticClass:"desc-color",staticStyle:{"font-size":"15px"}},[t._v(t._s(i.desc))])])])],1)])})),1),!t.isDragging&&t.isEdit?e("el-col",{staticClass:"no-drag",staticStyle:{"margin-bottom":"10px"},attrs:{lg:4,md:6,sm:8,xs:12}},[e("div",{staticClass:"linkAddButton",on:{click:function(e){return e.stopPropagation(),t.handleShowLinkAddDrawer(i)}}},[e("el-card",{staticStyle:{height:"100px",width:"100%","user-select":"none",cursor:"pointer","border-radius":"6px",border:"2px dashed #2196F3"},attrs:{shadow:"hover","body-style":{padding:"10px",height:"80px"}}},[e("div",{staticStyle:{display:"flex","flex-flow":"column","justify-content":"center","align-items":"center",height:"80px"}},[e("i",{staticClass:"el-icon-circle-plus",staticStyle:{"font-size":"40px",display:"inline-block",color:"#2196F3"}})])])],1)]):t._e()],1)})),1),!t.isDragging&&t.isEdit?e("el-card",{staticClass:"no-drag categoryAddButton",staticStyle:{height:"35px",width:"100%","user-select":"none",cursor:"pointer","border-radius":"6px",border:"2px dashed #2196F3"},attrs:{shadow:"hover","body-style":{padding:"0px",height:"0"}}},[e("div",{staticStyle:{"font-style":"italic","font-size":"14px",display:"flex","flex-flow":"row","justify-content":"center","align-items":"center","line-height":"30px",color:"#2196F3","font-weight":"500"},on:{click:function(e){return e.stopPropagation(),t.handleShowCategoryAddDrawer.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-circle-plus"}),e("span",[t._v("新增分类")])])]):t._e(),e("el-drawer",{attrs:{title:(t.currentCategory?t.currentCategory.title:"")+"-新增链接卡片","append-to-body":!0,visible:t.visibleLinkAdd},on:{"update:visible":function(e){t.visibleLinkAdd=e}}},[e("el-form",{ref:"linkForm",staticStyle:{padding:"0 20px 0 0"},attrs:{model:t.linkForm,rules:t.linkFormRules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"分类",prop:"title"}},[e("el-input",{attrs:{disabled:""},model:{value:t.linkForm.title,callback:function(e){t.$set(t.linkForm,"title",e)},expression:"linkForm.title"}})],1),e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{model:{value:t.linkForm.name,callback:function(e){t.$set(t.linkForm,"name",e)},expression:"linkForm.name"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"desc"}},[e("el-input",{model:{value:t.linkForm.desc,callback:function(e){t.$set(t.linkForm,"desc",e)},expression:"linkForm.desc"}})],1),e("el-form-item",{attrs:{label:"链接",prop:"href"}},[e("el-input",{model:{value:t.linkForm.href,callback:function(e){t.$set(t.linkForm,"href",e)},expression:"linkForm.href"}})],1),e("el-form-item",{attrs:{label:"图标",prop:"logo"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","auto-upload":!1,"show-file-list":!1,"on-change":t.handlePreview,accept:"image/*"}},[t.linkForm.logo?e("img",{staticClass:"avatar",attrs:{src:t.linkForm.logo,alt:"image"}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("el-form-item",{attrs:{label:"预览"}},[e("el-card",{staticStyle:{height:"100px",width:"200px","user-select":"none",cursor:"pointer","border-radius":"6px"},attrs:{shadow:"hover","body-style":{padding:"10px",height:"80px"}}},[e("div",{staticStyle:{display:"flex","flex-flow":"column","justify-content":"space-between",height:"80px"},on:{click:function(e){return e.stopPropagation(),t.click(t.linkForm,!0)}}},[e("div",{staticStyle:{display:"flex"}},[t.linkForm.logo?e("el-image",{staticStyle:{width:"30px",height:"30px","margin-right":"5px","border-radius":"8px"},style:{backgroundColor:t.linkForm.logoColor?t.linkForm.logoColor:"#FFF"},attrs:{src:t.linkForm.logo}}):t._e(),e("span",{staticClass:"title-color",staticStyle:{display:"inline-block","line-height":"30px","font-size":"14px"}},[t._v(t._s(t.linkForm.name))])],1),e("span",{staticClass:"desc-color",staticStyle:{"font-size":"15px"}},[t._v(t._s(t.linkForm.desc))])])])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveLink}},[t._v("保存")]),e("el-button",{on:{click:function(e){t.visibleLinkAdd=!1}}},[t._v("取消")])],1)],1)],1),e("el-drawer",{attrs:{title:"新增分类卡片","append-to-body":!0,visible:t.visibleCategoryAdd},on:{"update:visible":function(e){t.visibleCategoryAdd=e}}},[e("el-form",{ref:"categoryForm",staticStyle:{padding:"0 20px 0 0"},attrs:{model:t.categoryForm,rules:t.categoryFormRules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"标题",prop:"title"}},[e("el-input",{model:{value:t.categoryForm.title,callback:function(e){t.$set(t.categoryForm,"title",e)},expression:"categoryForm.title"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveCategory}},[t._v("保存")]),e("el-button",{on:{click:function(e){t.visibleCategoryAdd=!1}}},[t._v("取消")])],1)],1)],1),e("transition",{attrs:{name:"slide-up"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isDragging&&t.isEdit,expression:"isDragging && isEdit"}],staticClass:"delete-zone",class:{"delete-active":t.isOverDeleteZone},on:{dragover:function(e){return e.preventDefault(),t.handleDragOver.apply(null,arguments)},dragleave:t.handleDragLeave}},[e("i",{staticClass:"el-icon-delete"}),t.isOverDeleteZone?t._e():e("span",[t._v("拖拽到此删除")]),t.isOverDeleteZone?e("span",[t._v("释放删除")]):t._e()])])],1)},l=[],s=i(432),c=i.n(s),d=i(3807),u=i.n(d),p={name:"info-nav",components:{draggable:c()},props:{navData:{type:Array,default:()=>[]},isEdit:{type:Boolean,default:!1}},watch:{navData:{handler(t,e){this.category=t},deep:!1}},created(){},data(){return{categoryForm:{title:null},categoryFormRules:{title:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},linkForm:{name:null,desc:null,logo:null,href:null},linkFormRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],desc:[{required:!0,message:"请输入描述",trigger:"blur"}],href:[{required:!0,message:"请输入链接",trigger:"blur"}]},visibleLinkAdd:!1,visibleCategoryAdd:!1,currentCategory:null,category:[],isDragging:!1,isOverDeleteZone:!1,currentDraggedItem:null}},mounted(){},beforeDestroy(){},methods:{handleShowLinkAddDrawer(t){this.visibleLinkAdd=!0,this.currentCategory=t,this.linkForm.title=t.title,this.linkForm.logo=null,this.linkForm.name=null,this.linkForm.desc=null,this.linkForm.href=null},handleShowCategoryAddDrawer(){this.visibleCategoryAdd=!0,this.categoryForm.title=null},handleSaveCategory(){this.$refs["categoryForm"].validate((t=>{if(!t)return!1;this.category.push({title:this.categoryForm.title,data:[]}),this.visibleCategoryAdd=!1,this.$emit("update:navData",this.category)}))},handleSaveLink(){this.$refs["linkForm"].validate((t=>{if(!t)return!1;this.currentCategory.data.push({name:this.linkForm.name,desc:this.linkForm.desc,href:this.linkForm.href,logo:this.linkForm.logo}),this.visibleLinkAdd=!1,this.$emit("update:navData",this.category)}))},handlePreview(t){return new(u())(t.raw,{maxWidth:100,maxHeight:100,quality:1,mimeType:"image/jpeg",success:t=>{const e=new FileReader;e.onload=t=>{this.linkForm.logo=t.target.result},e.readAsDataURL(t)},error(t){console.log(t.message)}}),!1},handleStartDrag(t,e){this.isDragging=!0,this.currentDraggedItem=e[t]},handleEndDrag(t){this.isOverDeleteZone&&this.executeDelete(),this.resetDragState()},handleDragOver(){this.isOverDeleteZone=!0},handleDragLeave(){this.isOverDeleteZone=!1},executeDelete(){if(this.currentDraggedItem){if(this.currentDraggedItem.data){let t=this.category.findIndex((t=>t===this.currentDraggedItem));-1!==t&&this.category.splice(t,1)}else this.category.forEach((t=>{if(t.data){let e=t.data.findIndex((t=>t===this.currentDraggedItem));-1!==e&&t.data.splice(e,1)}}));this.categoryChange()}},resetDragState(){this.isDragging=!1,this.isOverDeleteZone=!1,this.currentDraggedItem=null},categoryChange(){this.$emit("update:navData",this.category)},getCategoryOptions(){return{animation:400,chosenClass:"dragging-item-category",dragClass:"dragging-item-category-drag",filter:".no-drag"}},getOptions(){return{animation:400,chosenClass:"dragging-item",filter:".no-drag"}},click(t,e){if(this.isEdit&&!e)return;if(!t.href)return;if(!t.href.startsWith("http://")&&!t.href.startsWith("https://"))return;let i=document.createElement("a");i.href=t.href,i.setAttribute("target","_blank"),i.click()}}},g=p,h=i(1656),f=(0,h.A)(g,r,l,!1,null,null,null),v=f.exports,m=i(4335),y=function(){var t=this,e=t._self._c;return e("div",[t.isEdit?e("button",{staticClass:"DocSearch DocSearch-Button DocSearch-Button-Hover",attrs:{type:"button","aria-label":"修改标题"},on:{click:function(e){t.visibleTitleEdit=!0}}},[e("i",{staticClass:"el-icon-edit"}),e("span",{staticClass:"DocSearch-Button-Container"},[t._v("修改标题")])]):t._e(),e("el-drawer",{attrs:{title:"修改标题内容","append-to-body":!0,visible:t.visibleTitleEdit},on:{"update:visible":function(e){t.visibleTitleEdit=e}}},[e("div",{staticStyle:{padding:"0 20px"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),e("div",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[e("el-button",{on:{click:function(e){t.visibleTitleEdit=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$emit("update:data",t.title),t.visibleTitleEdit=!1}}},[t._v("确定")])],1)],1)])],1)},b=[],k={name:"EditTitle",props:{isEdit:{type:Boolean,default:!1},data:{type:String}},watch:{data(t){this.title=t}},data(){return{visibleTitleEdit:!1,title:""}}},x=k,C=(0,h.A)(x,y,b,!1,null,"c221765a",null),S=C.exports,D={name:"App",components:{EditTitle:S,InfoNav:v},created(){m.A.get("/api/config").then((t=>{this.config=t.data,this.$nextTick((()=>{this.$driver&&this.$driver.drive()}))}))},data(){return{isEdit:!1,config:{title:"",navData:[]}}},computed:{},watch:{"config.title"(){document.title=this.config.title}},mounted(){this.$bus.$off("navEditButtonClick"),this.$bus.$off("navCancelButtonClick"),this.$bus.$on("navEditButtonClick",(t=>{this.editConfig()})),this.$bus.$on("navCancelButtonClick",(t=>{this.cancelEdit()}))},methods:{editConfig(){this.isEdit=!0,this.configBak=JSON.parse(JSON.stringify(this.config))},cancelEdit(){this.isEdit=!1,this.config=this.configBak,this.configBak=null},pushConfig(){m.A.post("/api/config",this.config).then((t=>{this.isEdit=!1}))}}},w=D,_=(0,h.A)(w,a,o,!1,null,null,null),F=_.exports,E=i(1052),B=i.n(E),$=i(8818);function O(){n["default"].prototype.$driver=new $.B({opacity:.75,stagePadding:6,allowClose:!1,doneBtnText:"完成",closeBtnText:"关闭",stageBackground:"#fff",nextBtnText:"下一步",prevBtnText:"上一步",showButtons:["next","previous"],popoverClass:"driverjs-theme",onHighlightStarted(t,e,i){t.classList.add("no-click")},onDeselected(t,e,i){t.classList.remove("no-click")},steps:[{element:".linkCard:nth-child(1)",popover:{title:"链接卡片",description:"点击具体卡片可跳转页面",position:"right"}},{element:"#navEditButton",popover:{title:"启用编辑模式",description:"启用编辑后，可以对链接卡片动态配置",position:"right",onNextClick(t,e,i){n["default"].prototype.$bus.$emit("navEditButtonClick"),n["default"].prototype.$nextTick((()=>{i.driver.moveNext()}))}}},{element:"#navMain",popover:{title:"卡片编辑",description:"可拖拽卡片与分类动态调整类型",position:"right",onPrevClick(t,e,i){n["default"].prototype.$bus.$emit("navCancelButtonClick"),n["default"].prototype.$nextTick((()=>{i.driver.movePrevious()}))}},onHighlightStarted(t,e,i){t.classList.add("no-click-exclude-nav-main")},onDeselected(t,e,i){t.classList.remove("no-click-exclude-nav-main")}},{element:".linkAddButton:nth-child(1)",popover:{title:"新增链接卡片",description:"在当前分类下新增链接卡片",position:"right"}},{element:".categoryAddButton",popover:{title:"新增链接分类",description:"在当前分类下新增链接分类",position:"right"}},{element:"#navEditTitleButton",popover:{title:"修改标题",description:"点击可修改当前导航标题",position:"right"}},{element:"#navSaveButton",popover:{title:"保存变更",description:"点击保存对导航内容的变更",position:"right"}},{element:"#navCancelButton",popover:{title:"取消变更",description:"点击还原导航内容",position:"right",onNextClick(t,e,i){n["default"].prototype.$bus.$emit("navCancelButtonClick"),n["default"].prototype.$nextTick((()=>{i.driver.destroy()})),localStorage.setItem("driver-init","true")}}}]})}"true"!==localStorage.getItem("driver-init")&&O(),n["default"].config.productionTip=!1,n["default"].prototype.$bus=new n["default"],n["default"].use(B(),{size:"small"}),new n["default"]({render:function(t){return t(F)}}).$mount("#app")}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,function(){i.amdO={}}(),function(){var t=[];i.O=function(e,n,a,o){if(!n){var r=1/0;for(d=0;d<t.length;d++){n=t[d][0],a=t[d][1],o=t[d][2];for(var l=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(i.O).every((function(t){return i.O[t](n[s])}))?n.splice(s--,1):(l=!1,o<r&&(r=o));if(l){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[n,a,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,o,r=n[0],l=n[1],s=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(s)var d=s(i)}for(e&&e(n);c<r.length;c++)o=r[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(d)},n=self["webpackChunkkt_nav"]=self["webpackChunkkt_nav"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(5183)}));n=i.O(n)})();
//# sourceMappingURL=app.98f45c39.js.map